{"version":3,"sources":["day8/re_frame_10x/events.cljs"],"mappings":"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","names":["day8.re-frame-10x.events/fixed-after","f","G__45725","G__45726","G__45727","G__45728","day8.re-frame-10x.inlined-deps.re-frame.v0v10v9.re-frame.core/->interceptor","context","db","cljs.core/contains?","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","event","day8.re-frame-10x.events/log-trace?","trace","render-operation?","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","component-path","cljs.core.get_in.cljs$core$IFn$_invoke$arity$3","clojure.string/includes?","day8.re-frame-10x.events/disable-tracing!","re-frame.trace/remove-trace-cb","day8.re-frame-10x.events/enable-tracing!","p1__45731#","re-frame.trace/register-trace-cb","G__45732","day8.re-frame-10x.inlined-deps.re-frame.v0v10v9.re-frame.core/dispatch","p__45733","vec__45734","seq__45735","cljs.core/seq","first__45736","cljs.core/first","cljs.core/next","day8.re-frame-10x.events/dissoc-in","m","k","ks","keys","temp__5733__auto__","nextmap","cljs.core.get.cljs$core$IFn$_invoke$arity$2","newmap","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","day8.re-frame-10x.events/read-string-maybe","s","e45745","cljs.tools.reader.edn.read_string.cljs$core$IFn$_invoke$arity$2","day8.re-frame-10x.utils.utils/default-readers","e","day8.re_frame_10x.inlined_deps.re_frame.v0v10v9.re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2","p__45750","vec__45751","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","_","width%","day8.re-frame-10x.utils.localstorage/save!","x__4219__auto__","y__4220__auto__","cljs.core/assoc-in","p__45758","vec__45761","width","p__45766","vec__45767","selected-tab","cljs.core.update_in.cljs$core$IFn$_invoke$arity$3","cljs.core/not","p__45770","vec__45771","show-panel?","day8.re-frame-10x.utils.localstorage/delete-all-keys!","js/location.reload","now-showing?","external-panel?","using-trace?","or__4131__auto__","p__45774","vec__45775","num-str","num","js/parseInt","js/isNaN","cljs.core/pos-int?","day8.re-frame-10x.events/ignored-event-mw","G__45787","day8.re-frame-10x.inlined-deps.re-frame.v0v10v9.re-frame.core/path","p1__45786#","day8.re_frame_10x.inlined_deps.re_frame.v0v10v9.re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$3","ignored-events","id","cljs.core/random-uuid","js/Date.now","p__45813","vec__45814","p__45827","vec__45828","event-str","old-event","p__45835","vec__45836","day8.re-frame-10x.events/filtered-view-trace-mw","G__45840","p1__45839#","filtered-view-trace","p__45844","vec__45845","p__45860","vec__45861","ns-str","p__45878","vec__45883","day8.re-frame-10x.events/low-level-trace-mw","G__45892","p1__45887#","p__45898","vec__45899","low-level","p__45902","vec__45903","trace-type","capture?","p__45906","vec__45907","debug?","G__45915","p1__45912#","p__45920","vec__45921","follows-events?","day8.re-frame-10x.events/mount","popup-window","popup-document","app","resize-update-scheduled?","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","handle-window-resize","cljs.core/deref","G__45930","reagent.impl.batching/next-tick","height","G__45931","cljs.core/reset!","handle-window-position","pos","map__45932","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","left","top","screen-left","screen-top","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","G__45934","window-position-interval","unmount","G__45935","js/clearInterval","day8.re-frame-10x.styles/inject-trace-styles","G__45942","G__45943","G__45944","goog.object/set","G__45945","day8.re_frame_10x.inlined_deps.reagent.v0v8v1.reagent.core.render.cljs$core$IFn$_invoke$arity$2","day8.re-frame-10x.inlined-deps.reagent.v0v8v1.reagent.core/create-class","js/setInterval","day8.re-frame-10x.view.container/devtools-inner","p__45950","map__45951","day8.re-frame-10x.events/open-debugger-window","dimensions","doc-title","js/document.title","new-window-title","G__45961","goog.string/escapeString","new-window-html","w","js/window.open","d","G__45970","G__45971","G__45972","day8.re_frame_10x.inlined_deps.re_frame.v0v10v9.re_frame.core.reg_event_fx.cljs$core$IFn$_invoke$arity$2","ctx","G__45978","G__45979","p1__45977#","day8.re-frame-10x.inlined-deps.re-frame.v0v10v9.re-frame.core/after","p__45984","vec__45985","dim","new-dim","G__45989","G__45990","p1__45988#","p__45991","vec__45992","map__45995","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","G__46018","G__46019","p1__46017#","p__46020","vec__46021","map__46024","js/window.addEventListener","G__46034","day8.re-frame-10x.inlined-deps.re-frame.v0v10v9.re-frame.core/dispatch-sync","p__46035","vec__46040","unloading?","day8.re-frame-10x.events/save-filter-items","filter-items","p__46044","vec__46045","G__46054","p__46055","vec__46056","filter-input","filter-type","new-db","p1__46051#","cljs.core/some","and__4120__auto__","p1__46052#","p1__46053#","cljs.core.remove.cljs$core$IFn$_invoke$arity$2","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","clojure.string/lower-case","js/parseFloat","G__46066","p__46067","vec__46068","filter-id","p1__46065#","G__46071","trace-detail-expansions","cljs.core.update.cljs$core$IFn$_invoke$arity$3","G__46077","p__46078","vec__46079","expansions","showing?","p1__46076#","G__46082","p__46083","vec__46084","categories","new-categories","clojure.set/superset?","clojure.set.difference.cljs$core$IFn$_invoke$arity$2","clojure.set.union.cljs$core$IFn$_invoke$arity$2","G__46087","p__46092","vec__46093","G__46101","p1__46100#","p__46104","vec__46105","show-epoch-traces?","day8.re-frame-10x.events/app-db-path-mw","G__46113","p1__46112#","paths","p__46122","vec__46123","path-id","path-str","path","cljs.core/sequential?","clojure.string/blank?","p__46130","vec__46131","map__46134","valid-path?","cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic","p__46136","vec__46137","open?","p__46140","vec__46141","diff?","p__46144","vec__46145","p__46148","vec__46149","p__46154","vec__46155","search-string","G__46158","p__46159","vec__46161","G__46164","p__46168","vec__46169","new-paths","cljs.core.disj.cljs$core$IFn$_invoke$arity$2","G__46173","re-frame.interop/reagent-id","re-frame.db/app-db","p__46174","vec__46175","new-id","epochs","match-id","day8.re-frame-10x.utils.utils/last-in-vec","match","day8.re-frame-10x.metamorphic/matched-event","temp__5739__auto__","day8.re-frame-10x.metamorphic/app-db-after","day8.re-frame-10x.events/first-match-id","p__46193","p__46194","map__46195","vec__46196","new-traces","filtered-traces","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","cljs.core.sort_by.cljs$core$IFn$_invoke$arity$2","map__46210","number-of-epochs-to-retain","events-to-ignore","cljs.core/vals","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core/set","previous-traces","parse-state","day8.re-frame-10x.metamorphic/initial-parse-state","drop-re-frame","drop-reagent","all-traces","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","cljs.core/conj","day8.re-frame-10x.metamorphic/parse-traces","new-matches","previous-matches","subscription-info","day8.re-frame-10x.metamorphic/subscription-info","sub-state","day8.re-frame-10x.metamorphic/initial-sub-state","subscription-match-state","day8.re-frame-10x.metamorphic/subscription-match-state","subscription-matches","cljs.core/rest","new-sub-state","cljs.core/last","timing","cljs.core.mapv.cljs$core$IFn$_invoke$arity$2","epoch-traces","cljs.core.into.cljs$core$IFn$_invoke$arity$3","cljs.core.comp.cljs$core$IFn$_invoke$arity$1","day8.re-frame-10x.utils.utils/id-between-xf","start-of-epoch","cljs.core.nth.cljs$core$IFn$_invoke$arity$2","event-handler-trace","day8.re-frame-10x.metamorphic/event-handler?","dofx-trace","day8.re-frame-10x.metamorphic/event-dofx?","event-trace","day8.re-frame-10x.metamorphic/event-run?","finish-run","day8.re-frame-10x.metamorphic/finish-run?","day8.re-frame-10x.metamorphic/elapsed-time","cljs.core.map.cljs$core$IFn$_invoke$arity$4","sub-match","t","quiescent?","day8.re-frame-10x.metamorphic/quiescent?","all-matches","retained-matches","cljs.core.into.cljs$core$IFn$_invoke$arity$2","cljs.core/take-last","first-id-to-retain","retained-traces","cljs.core.comp.cljs$core$IFn$_invoke$arity$2","p1__46186#","cljs.core.drop_while.cljs$core$IFn$_invoke$arity$1","cljs.core.remove.cljs$core$IFn$_invoke$arity$1","day8.re-frame-10x.metamorphic/low-level-reagent-trace?","day8.re-frame-10x.metamorphic/low-level-re-frame-trace?","current-index","current-id","cljs.core.map.cljs$core$IFn$_invoke$arity$1","cljs.core.juxt.cljs$core$IFn$_invoke$arity$2","cljs.core/identity","day8.re_frame_10x.inlined_deps.re_frame.v0v10v9.re_frame.core.reg_event_fx.cljs$core$IFn$_invoke$arity$3","G__46238","p__46239","map__46240","temp__5737__auto__","match-ids","match-array-index","day8.re-frame-10x.utils.utils/find-index-in-vec","x","cljs.core/count","G__46250","p__46255","map__46256","G__46266","p__46267","map__46268","G__46276","p__46277","p__46278","map__46279","vec__46280","G__46296","current-epoch-id","app-db-before","day8.re-frame-10x.metamorphic/app-db-before","G__46305","event-to-replay","re-frame.core/dispatch","re-frame.trace/reset-tracing!","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic","G__46312","p__46313","vec__46314","ignore?","G__46323","p__46324","vec__46325","G__46330","p__46335","vec__46336","G__46341","p__46346","vec__46347","pinned","pinned?","G__46352","p__46353","vec__46354","filter-value","G__46357","p__46358","vec__46359","code-open?","open?-path","G__46362","p__46363","vec__46364","form","new-form","G__46367","p__46368","vec__46369","G__46372","p__46373","vec__46374","_show-all-code?","new-show-all-code?","G__46377","p__46378","vec__46379","current-state","new-state","G__46382","p__46383","vec__46384","component","new-direction","G__46387","errors"],"sourcesContent":["(ns day8.re-frame-10x.events\n  (:require [day8.re-frame-10x.inlined-deps.re-frame.v0v10v9.re-frame.core :as rf]\n            [day8.re-frame-10x.inlined-deps.reagent.v0v8v1.reagent.core :as r]\n            [cljs.tools.reader.edn]\n            [day8.re-frame-10x.utils.utils :as utils :refer [spy]]\n            [day8.re-frame-10x.utils.localstorage :as localstorage]\n            [reagent.impl.batching :as batching]\n            [clojure.string :as str]\n            [goog.object]\n            [goog.string]\n            [re-frame.db]\n            [re-frame.interop]\n            [re-frame.core]\n            [re-frame.trace]\n            [day8.re-frame-10x.view.container :as container]\n            [day8.re-frame-10x.styles :as styles]\n            [clojure.set :as set]\n            [day8.re-frame-10x.metamorphic :as metam]))\n\n(defn fixed-after\n  ;; Waiting on https://github.com/day8/re-frame/issues/447\n  [f]\n  (rf/->interceptor\n    :id :after\n    :after (fn after-after\n             [context]\n             (let [db    (if (contains? (:effects context) :db)\n                           (get-in context [:effects :db])\n                           (get-in context [:coeffects :db]))\n                   event (get-in context [:coeffects :event])]\n               (f db event)                                 ;; call f for side effects\n               context))))                                  ;; context is unchanged\n\n(defn log-trace? [trace]\n  (let [render-operation? (or (= (:op-type trace) :render)\n                              (= (:op-type trace) :componentWillUnmount))\n        component-path    (get-in trace [:tags :component-path] \"\")]\n    (if-not render-operation?\n      true\n      (not (str/includes? component-path \"devtools outer\")))))\n\n(defn disable-tracing! []\n  (re-frame.trace/remove-trace-cb ::cb))\n\n(defn enable-tracing! []\n  (re-frame.trace/register-trace-cb ::cb #(rf/dispatch [:epochs/receive-new-traces %])))\n\n(defn dissoc-in\n  \"Dissociates an entry from a nested associative structure returning a new\n  nested structure. keys is a sequence of keys. Any empty maps that result\n  will not be present in the new structure.\"\n  [m [k & ks :as keys]]\n  (if ks\n    (if-let [nextmap (clojure.core/get m k)]\n      (let [newmap (dissoc-in nextmap ks)]\n        (if (seq newmap)\n          (assoc m k newmap)\n          (dissoc m k)))\n      m)\n    (dissoc m k)))\n\n(defn read-string-maybe [s]\n  (try (cljs.tools.reader.edn/read-string {:readers utils/default-readers} s)\n       (catch :default e\n         nil)))\n\n(rf/reg-event-db\n  :settings/panel-width%\n  (fn [db [_ width%]]\n    (localstorage/save! \"panel-width-ratio\" (max width% 0.05))\n    (assoc-in db [:settings :panel-width%] (max width% 0.05))))\n\n(rf/reg-event-db\n  :settings/window-width\n  (fn [db [_ width]]\n    (assoc-in db [:settings :window-width] width)))\n\n(rf/reg-event-db\n  :settings/selected-tab\n  (fn [db [_ selected-tab]]\n    (localstorage/save! \"selected-tab\" selected-tab)\n    (assoc-in db [:settings :selected-tab] selected-tab)))\n\n(rf/reg-event-db\n  :settings/toggle-settings\n  (fn [db _]\n    (update-in db [:settings :showing-settings?] not)))\n\n(rf/reg-event-db\n  :settings/show-panel?\n  (fn [db [_ show-panel?]]\n    (localstorage/save! \"show-panel\" show-panel?)\n    (assoc-in db [:settings :show-panel?] show-panel?)))\n\n(rf/reg-event-db\n  :settings/factory-reset\n  (fn [db _]\n    (localstorage/delete-all-keys!)\n    (js/location.reload)\n    db))\n\n(rf/reg-event-db\n  :settings/user-toggle-panel\n  (fn [db _]\n    (let [now-showing?    (not (get-in db [:settings :show-panel?]))\n          external-panel? (get-in db [:settings :external-window?])\n          using-trace?    (or external-panel? now-showing?)]\n      (if now-showing?\n        (enable-tracing!)\n        (when-not external-panel?\n          (disable-tracing!)))\n      (localstorage/save! \"using-trace?\" using-trace?)\n      (localstorage/save! \"show-panel\" now-showing?)\n      (-> db\n          (assoc-in [:settings :using-trace?] using-trace?)\n          (assoc-in [:settings :show-panel?] now-showing?)))))\n\n(rf/reg-event-db\n  :settings/set-number-of-retained-epochs\n  (fn [db [_ num-str]]\n    ;; TODO: this is not perfect, there is an issue in re-com\n    ;; where it won't update its model if it never receives another\n    ;; changes after it's on-change is fired.\n    ;; TODO: you could reset the stored epochs on change here\n    ;; once the way they are processed is refactored.\n    (let [num (js/parseInt num-str)\n          num (if (and (not (js/isNaN num)) (pos-int? num))\n                num\n                5)]\n      (localstorage/save! \"retained-epochs\" num)\n      (assoc-in db [:settings :number-of-epochs] num))))\n\n(def ignored-event-mw\n  [(rf/path [:settings :ignored-events]) (fixed-after #(localstorage/save! \"ignored-events\" %))])\n\n(rf/reg-event-db\n  :settings/add-ignored-event\n  ignored-event-mw\n  (fn [ignored-events _]\n    (let [id (random-uuid)]\n      (assoc ignored-events id {:id id :event-str \"\" :event-id nil :sort (js/Date.now)}))))\n\n(rf/reg-event-db\n  :settings/remove-ignored-event\n  ignored-event-mw\n  (fn [ignored-events [_ id]]\n    (dissoc ignored-events id)))\n\n(rf/reg-event-db\n  :settings/update-ignored-event\n  ignored-event-mw\n  (fn [ignored-events [_ id event-str]]\n    ;; TODO: this won't inform users if they type bad strings in.\n    (let [event (read-string-maybe event-str)]\n      (-> ignored-events\n          (assoc-in [id :event-str] event-str)\n          (update-in [id :event-id] (fn [old-event] (if event event old-event)))))))\n\n(rf/reg-event-db\n  :settings/set-ignored-events\n  ignored-event-mw\n  (fn [_ [_ ignored-events]]\n    ignored-events))\n\n(def filtered-view-trace-mw\n  [(rf/path [:settings :filtered-view-trace]) (fixed-after #(localstorage/save! \"filtered-view-trace\" %))])\n\n(rf/reg-event-db\n  :settings/add-filtered-view-trace\n  filtered-view-trace-mw\n  (fn [filtered-view-trace _]\n    (let [id (random-uuid)]\n      (assoc filtered-view-trace id {:id id :ns-str \"\" :ns nil :sort (js/Date.now)}))))\n\n(rf/reg-event-db\n  :settings/remove-filtered-view-trace\n  filtered-view-trace-mw\n  (fn [filtered-view-trace [_ id]]\n    (dissoc filtered-view-trace id)))\n\n(rf/reg-event-db\n  :settings/update-filtered-view-trace\n  filtered-view-trace-mw\n  (fn [filtered-view-trace [_ id ns-str]]\n    ;; TODO: this won't inform users if they type bad strings in.\n    (let [event (read-string-maybe ns-str)]\n      (-> filtered-view-trace\n          (assoc-in [id :ns-str] ns-str)\n          (update-in [id :ns] (fn [old-event] (if event event old-event)))))))\n\n(rf/reg-event-db\n  :settings/set-filtered-view-trace\n  filtered-view-trace-mw\n  (fn [_ [_ ignored-events]]\n    ignored-events))\n\n(def low-level-trace-mw [(rf/path [:settings :low-level-trace]) (fixed-after #(localstorage/save! \"low-level-trace\" %))])\n\n(rf/reg-event-db\n  :settings/set-low-level-trace\n  low-level-trace-mw\n  (fn [_ [_ low-level]]\n    low-level))\n\n(rf/reg-event-db\n  :settings/low-level-trace\n  low-level-trace-mw\n  (fn [low-level [_ trace-type capture?]]\n    (assoc low-level trace-type capture?)))\n\n(rf/reg-event-db\n  :settings/debug?\n  (fn [db [_ debug?]]\n    (assoc-in db [:settings :debug?] debug?)))\n\n(rf/reg-event-db\n  :settings/app-db-follows-events?\n  [(rf/path [:settings :app-db-follows-events?]) (fixed-after #(localstorage/save! \"app-db-follows-events?\" %))]\n  (fn [db [_ follows-events?]]\n    follows-events?))\n\n;; Global\n\n(defn mount [popup-window popup-document]\n  ;; When programming here, we need to be careful about which document and window\n  ;; we are operating on, and keep in mind that the window can close without going\n  ;; through standard react lifecycle, so we hook the beforeunload event.\n  (let [app                      (.getElementById popup-document \"--re-frame-10x--\")\n        resize-update-scheduled? (atom false)\n        handle-window-resize     (fn [e]\n                                   (when-not @resize-update-scheduled?\n                                     (batching/next-tick\n                                       (fn []\n                                         (let [width  (.-innerWidth popup-window)\n                                               height (.-innerHeight popup-window)]\n                                           (rf/dispatch [:settings/external-window-resize {:width width :height height}]))\n                                         (reset! resize-update-scheduled? false)))\n                                     (reset! resize-update-scheduled? true)))\n        handle-window-position   (let [pos (atom {})]\n                                   (fn []\n                                     ;; Only update re-frame if the windows position has changed.\n                                     (let [{:keys [left top]} @pos\n                                           screen-left (.-screenX popup-window)\n                                           screen-top  (.-screenY popup-window)]\n                                       (when (or (not= left screen-left)\n                                                 (not= top screen-top))\n                                         (rf/dispatch [:settings/external-window-position {:left screen-left :top screen-top}])\n                                         (reset! pos {:left screen-left :top screen-top})))))\n        window-position-interval (atom nil)\n        unmount                  (fn [_]\n                                   (.removeEventListener popup-window \"resize\" handle-window-resize)\n                                   (some-> @window-position-interval js/clearInterval)\n                                   nil)]\n\n\n    (styles/inject-trace-styles popup-document)\n    (goog.object/set popup-window \"onunload\" #(rf/dispatch [:global/external-closed]))\n    (r/render\n      [(r/create-class\n         {:display-name           \"devtools outer external\"\n          :component-did-mount    (fn []\n                                    (.addEventListener popup-window \"resize\" handle-window-resize)\n                                    (.addEventListener popup-window \"beforeunload\" unmount)\n                                    ;; Check the window position every 10 seconds\n                                    (reset! window-position-interval\n                                            (js/setInterval\n                                              handle-window-position\n                                              2000)))\n          :component-will-unmount unmount\n          :reagent-render         (fn [] [container/devtools-inner {:panel-type :popup}])})]\n      app)))\n\n(defn open-debugger-window\n  \"Originally copied from re-frisk.devtool/open-debugger-window\"\n  [{:keys [width height top left] :as dimensions}]\n  (let [doc-title        js/document.title\n        new-window-title (goog.string/escapeString (str \"re-frame-10x | \" doc-title))\n        new-window-html  (str \"<head><title>\"\n                              new-window-title\n                              \"</title></head><body style=\\\"margin: 0px;\\\"><div id=\\\"--re-frame-10x--\\\" class=\\\"external-window\\\"></div></body>\")]\n    ;; We would like to set the windows left and top positions to match the monitor that it was on previously, but Chrome doesn't give us\n    ;; control over this, it will only position it within the same display that it was popped out on.\n    (if-let [w (js/window.open \"about:blank\" \"re-frame-10x-popout\"\n                               (str \"width=\" width \",height=\" height \",left=\" left \",top=\" top\n                                    \",resizable=yes,scrollbars=yes,status=no,directories=no,toolbar=no,menubar=no\"))]\n      (let [d (.-document w)]\n        ;; We had to comment out the following unmountComponentAtNode as it causes a React exception we assume\n        ;; because React says el is not a root container that it knows about.\n        ;; In theory by not freeing up the resources associated with this container (e.g. event handlers) we may be\n        ;; creating memory leaks. However with observation of the heap in developer tools we cannot see any significant\n        ;; unbounded growth in memory usage.\n        ;(when-let [el (.getElementById d \"--re-frame-10x--\")]\n        ;  (r/unmount-component-at-node el)))\n        (.open d)\n        (.write d new-window-html)\n        (goog.object/set w \"onload\" #(mount w d))\n        (.close d)\n        true)\n      false)))\n\n(rf/reg-event-fx\n  :global/launch-external\n  (fn [ctx _]\n    (if (open-debugger-window (get-in ctx [:db :settings :external-window-dimensions]))\n      (do\n        (localstorage/save! \"external-window?\" true)\n        {:db             (-> (:db ctx)\n                             (assoc-in [:settings :external-window?] true)\n                             (dissoc-in [:errors :popup-failed?]))\n         :dispatch-later [{:ms 200 :dispatch [:settings/show-panel? false]}]})\n      {:db       (assoc-in (:db ctx) [:errors :popup-failed?] true)\n       :dispatch [:global/external-closed]})))\n\n(rf/reg-event-fx\n  :global/external-closed\n  (fn [ctx _]\n    (localstorage/save! \"external-window?\" false)\n    {:db             (assoc-in (:db ctx) [:settings :external-window?] false)\n     :dispatch-later [{:ms 400 :dispatch [:settings/show-panel? true]}]}))\n\n(rf/reg-event-db\n  :settings/external-window-dimensions\n  [(rf/path [:settings :external-window-dimensions]) (rf/after #(localstorage/save! \"external-window-dimensions\" %))]\n  (fn [dim [_ new-dim]]\n    new-dim))\n\n(rf/reg-event-db\n  :settings/external-window-resize\n  [(rf/path [:settings :external-window-dimensions]) (rf/after #(localstorage/save! \"external-window-dimensions\" %))]\n  (fn [dim [_ {width :width height :height}]]\n    (assoc dim :width width :height height)))\n\n(rf/reg-event-db\n  :settings/external-window-position\n  [(rf/path [:settings :external-window-dimensions]) (rf/after #(localstorage/save! \"external-window-dimensions\" %))]\n  (fn [dim [_ {left :left top :top}]]\n    (assoc dim :left left :top top)))\n\n(rf/reg-event-fx\n  :global/enable-tracing\n  (fn [ctx _]\n    (enable-tracing!)\n    nil))\n\n(rf/reg-event-fx\n  :global/disable-tracing\n  (fn [ctx _]\n    (disable-tracing!)\n    nil))\n\n(rf/reg-event-fx\n  :global/add-unload-hook\n  (fn [_ _]\n    (js/window.addEventListener \"beforeunload\" #(rf/dispatch-sync [:global/unloading? true]))\n    nil))\n\n(rf/reg-event-db\n  :global/unloading?\n  (fn [db [_ unloading?]]\n    (assoc-in db [:global :unloading?] unloading?)))\n\n;; Traces\n\n(defn save-filter-items [filter-items]\n  (localstorage/save! \"filter-items\" filter-items))\n\n(rf/reg-event-db\n  :traces/filter-items\n  (fn [db [_ filter-items]]\n    (save-filter-items filter-items)\n    (assoc-in db [:traces :filter-items] filter-items)))\n\n(rf/reg-event-db\n  :traces/add-filter\n  [(rf/path [:traces :filter-items])]\n  (fn [filter-items [_ filter-input filter-type]]\n    (let [new-db (when-not (some #(= filter-input (:query %)) filter-items) ;; prevent duplicate filter strings\n                   ;; if existing, remove prior filter for :slower-than\n                   ;; TODO: rework how time filters are used.\n                   (let [filter-items (if (and (= :slower-than filter-type)\n                                               (some #(= filter-type (:filter-type %)) filter-items))\n                                        (remove #(= :slower-than (:filter-type %)) filter-items)\n                                        filter-items)]\n                     ;; add new filter\n                     (conj filter-items {:id          (random-uuid)\n                                         :query       (if (= filter-type :contains)\n                                                        (str/lower-case filter-input)\n                                                        (js/parseFloat filter-input))\n                                         :filter-type filter-type})))]\n      (save-filter-items new-db)\n      new-db)))\n\n(rf/reg-event-db\n  :traces/remove-filter\n  [(rf/path [:traces :filter-items])]\n  (fn [filter-items [_ filter-id]]\n    (let [new-db (remove #(= (:id %) filter-id) filter-items)]\n      (save-filter-items new-db)\n      new-db)))\n\n(rf/reg-event-db\n  :traces/reset-filter-items\n  (fn [db _]\n    (let [new-db (dissoc-in db [:traces :filter-items])]\n      (save-filter-items (get-in new-db [:traces :filter-items]))\n      new-db)))\n\n(rf/reg-event-db\n  :traces/toggle-all-expansions\n  [(rf/path [:traces :expansions])]\n  (fn [trace-detail-expansions _]\n    (-> trace-detail-expansions\n        (assoc :overrides {})\n        (update :show-all? not))))\n\n(rf/reg-event-db\n  :traces/toggle-trace\n  [(rf/path [:traces :expansions])]\n  (fn [expansions [_ id]]\n    (let [showing? (get-in expansions [:overrides id] (:show-all? expansions))]\n      (update-in expansions [:overrides id] #(if showing? false (not %))))))\n\n(rf/reg-event-db\n  :traces/toggle-categories\n  [(rf/path [:traces :categories])]\n  (fn [categories [_ new-categories]]\n    (let [new-categories (if (set/superset? categories new-categories)\n                           (set/difference categories new-categories)\n                           (set/union categories new-categories))]\n      (localstorage/save! \"categories\" new-categories)\n      new-categories)))\n\n(rf/reg-event-db\n  :traces/set-categories\n  [(rf/path [:traces :categories])]\n  (fn [categories [_ new-categories]]\n    new-categories))\n\n\n(rf/reg-event-db\n  :trace-panel/update-show-epoch-traces?\n  [(rf/path [:trace-panel :show-epoch-traces?]) (fixed-after #(localstorage/save! \"show-epoch-traces?\" %))]\n  (fn [_ [k show-epoch-traces?]]\n    show-epoch-traces?))\n\n;; App DB\n\n(def app-db-path-mw\n  [(rf/path [:app-db :paths]) (fixed-after #(localstorage/save! \"app-db-paths\" %))])\n\n(rf/reg-event-db\n  :app-db/create-path\n  app-db-path-mw\n  (fn [paths _]\n\n    (assoc paths (js/Date.now) {:diff? false :open? true :path nil :path-str \"\" :valid-path? true})))\n\n\n\n;; The core idea with :app-db/update-path and :app-db/update-path-blur\n;; is that we need to separate the users text input (`path-str`) with the\n;; parsing of that string (`path`). We let the user type any string that\n;; they like, and check it for validity on each change. If it is valid\n;; then we update `path` and mark the pod as valid. If it isn't valid then\n;; we don't update `path` and mark the pod as invalid.\n;;\n;; On blur of the input, we reset path-str to the last valid path, if\n;; the pod isn't currently valid.\n\n(rf/reg-event-db\n  :app-db/update-path\n  app-db-path-mw\n  (fn [paths [_ path-id path-str]]\n    (let [path  (read-string-maybe path-str)\n          paths (assoc-in paths [path-id :path-str] path-str)]\n      (if (or (and (some? path)\n                   (sequential? path))\n              (str/blank? path-str))\n        (-> paths\n            (assoc-in [path-id :path] path)\n            (assoc-in [path-id :valid-path?] true))\n        (assoc-in paths [path-id :valid-path?] false)))))\n\n(rf/reg-event-db\n  :app-db/update-path-blur\n  app-db-path-mw\n  (fn [paths [_ path-id]]\n    (let [{:keys [valid-path? path]} (get paths path-id)]\n      (if valid-path?\n        paths\n        (-> (assoc-in paths [path-id :path-str] (pr-str path))\n            (assoc-in [path-id :valid-path?] true))))))\n\n(rf/reg-event-db\n  :app-db/set-path-visibility\n  app-db-path-mw\n  (fn [paths [_ path-id open?]]\n    (assoc-in paths [path-id :open?] open?)))\n\n(rf/reg-event-db\n  :app-db/set-diff-visibility\n  app-db-path-mw\n  (fn [paths [_ path-id diff?]]\n    (let [open? (if diff?\n                  true\n                  (get-in paths [path-id :open?]))]\n      (-> paths\n          (assoc-in [path-id :diff?] diff?)\n          ;; If we turn on diffing then we want to also expand the path\n          (assoc-in [path-id :open?] open?)))))\n\n(rf/reg-event-db\n  :app-db/remove-path\n  app-db-path-mw\n  (fn [paths [_ path-id]]\n    (dissoc paths path-id)))\n\n(rf/reg-event-db\n  :app-db/paths\n  app-db-path-mw\n  (fn [db [_ paths]]\n    paths))\n\n#_(rf/reg-event-db\n    :app-db/remove-path\n    (fn [db [_ path]]\n      (let [new-db (update-in db [:app-db :paths] #(remove (fn [p] (= p path)) %))]\n        (localstorage/save! \"app-db-paths\" (get-in new-db [:app-db :paths]))\n        ;; TODO: remove from json-ml expansions too.\n        new-db)))\n\n#_(rf/reg-event-db\n    :app-db/add-path\n    (fn [db _]\n      (let [search-string (get-in db [:app-db :search-string])\n            path          (try\n                            (when-not (str/blank? search-string)\n                              (cljs.reader/read-string (str \"[\" search-string \"]\")))\n                            (catch :default e\n                              nil))]\n        (if (some? path)\n          (do (localstorage/save! \"app-db-paths\" (cons path (get-in db [:app-db :paths])))\n              (rf/dispatch [:app-db/toggle-expansion [path]])\n              (-> db\n                  (update-in [:app-db :paths] #(cons path %))\n                  (assoc-in [:app-db :search-string] \"\")))\n          db))))\n\n(rf/reg-event-db\n  :app-db/search-string\n  (fn [db [_ search-string]]\n    (assoc-in db [:app-db :search-string] search-string)))\n\n(rf/reg-event-db\n  :app-db/set-json-ml-paths\n  [(rf/path [:app-db :json-ml-expansions])]\n  (fn [db [_ paths]]\n    (localstorage/save! \"app-db-json-ml-expansions\" paths)\n    paths))\n\n(rf/reg-event-db\n  :app-db/toggle-expansion\n  [(rf/path [:app-db :json-ml-expansions])]\n  (fn [paths [_ path]]\n    (let [new-paths (if (contains? paths path)\n                      (disj paths path)\n                      (conj paths path))]\n      (localstorage/save! \"app-db-json-ml-expansions\" new-paths)\n      new-paths)))\n\n(rf/reg-event-db\n  :app-db/reagent-id\n  [(rf/path [:app-db :reagent-id])]\n  (fn [paths _]\n    (re-frame.interop/reagent-id re-frame.db/app-db)))\n\n(rf/reg-event-db\n  :snapshot/reset-current-epoch-app-db\n  (fn [db [_ new-id]]\n    (when (get-in db [:settings :app-db-follows-events?])\n      (let [epochs   (:epochs db)\n            match-id (or new-id\n                         ;; new-id may be nil when we call this event from :settings/play\n                         (utils/last-in-vec (get epochs :match-ids)))\n            match    (get-in epochs [:matches-by-id match-id])\n            event    (metam/matched-event (:match-info match))]\n        ;; Don't mess up the users app if there is a problem getting app-db-after.\n        (when-some [new-db (metam/app-db-after event)]\n          (reset! re-frame.db/app-db new-db))))\n    db))\n\n;;;\n\n(defn first-match-id\n  [m]\n  (-> m :match-info first :id))\n\n(rf/reg-event-fx\n  :epochs/receive-new-traces\n  (fn [{:keys [db]} [_ new-traces]]\n    (if-let [filtered-traces (->> (filter log-trace? new-traces)\n                                  (sort-by :id))]\n      (let [number-of-epochs-to-retain (get-in db [:settings :number-of-epochs])\n            events-to-ignore           (->> (get-in db [:settings :ignored-events]) vals (map :event-id) set)\n            previous-traces            (get-in db [:traces :all-traces] [])\n            parse-state                (get-in db [:epochs :parse-state] metam/initial-parse-state)\n            {drop-re-frame :re-frame drop-reagent :reagent} (get-in db [:settings :low-level-trace])\n            all-traces                 (reduce conj previous-traces filtered-traces)\n            parse-state                (metam/parse-traces parse-state filtered-traces)\n            ;; TODO:!!!!!!!!!!!!! We should be parsing everything else with the traces that span the newly matched\n            ;; epochs, not the filtered-traces, as these are only partial.\n            new-matches                (:partitions parse-state)\n            previous-matches           (get-in db [:epochs :matches] [])\n            parse-state                (assoc parse-state :partitions []) ;; Remove matches we know about\n            new-matches                (remove (fn [match]\n                                                 (let [event (get-in (metam/matched-event match) [:tags :event])]\n                                                   (contains? events-to-ignore (first event)))) new-matches)\n            ;; subscription-info is calculated separately from subscription-match-state because they serve different purposes:\n            ;; - subscription-info collects all the data that we know about the subscription itself, like its layer, inputs and other\n            ;;   things that are defined as part of the reg-sub.\n            ;; - subscription-match-state collects all the data that we know about the state of specific instances of subscriptions\n            ;;   like its reagent id, when it was created, run, disposed, what values it returned, e.t.c.\n            subscription-info          (metam/subscription-info (get-in db [:epochs :subscription-info] {}) filtered-traces (get-in db [:app-db :reagent-id]))\n            sub-state                  (get-in db [:epochs :sub-state] metam/initial-sub-state)\n            subscription-match-state   (metam/subscription-match-state sub-state all-traces new-matches)\n            subscription-matches       (rest subscription-match-state)\n\n            new-sub-state              (last subscription-match-state)\n            timing                     (mapv (fn [match]\n                                               (let [epoch-traces        (into []\n                                                                               (comp\n                                                                                 (utils/id-between-xf (:id (first match)) (:id (last match))))\n                                                                               all-traces)\n                                                     ;; TODO: handle case when there are no epoch-traces\n                                                     start-of-epoch      (nth epoch-traces 0)\n                                                     ;; TODO: optimise trace searching\n                                                     event-handler-trace (first (filter metam/event-handler? epoch-traces))\n                                                     dofx-trace          (first (filter metam/event-dofx? epoch-traces))\n                                                     event-trace         (first (filter metam/event-run? epoch-traces))\n                                                     finish-run          (or (first (filter metam/finish-run? epoch-traces))\n                                                                             (utils/last-in-vec epoch-traces))]\n                                                 {:re-frame/event-run-time     (metam/elapsed-time start-of-epoch finish-run)\n                                                  :re-frame/event-time         (:duration event-trace)\n                                                  :re-frame/event-handler-time (:duration event-handler-trace)\n                                                  :re-frame/event-dofx-time    (:duration dofx-trace)}))\n                                             new-matches)\n\n            new-matches                (map (fn [match sub-match t] {:match-info match\n                                                                     :sub-state  sub-match\n                                                                     :timing     t})\n                                            new-matches subscription-matches timing)\n            ;; If there are new matches found, then by definition, a quiescent trace must have been received\n            ;; However in cases where we reset the db in a replay, we won't get an event match.\n            ;; We short circuit here to avoid iterating over the traces when it's unnecessary.\n            quiescent?                 (or (seq new-matches)\n                                           (filter metam/quiescent? filtered-traces))\n            all-matches                (reduce conj previous-matches new-matches)\n            retained-matches           (into [] (take-last number-of-epochs-to-retain all-matches))\n            first-id-to-retain         (first-match-id (first retained-matches))\n            retained-traces            (into [] (comp (drop-while #(< (:id %) first-id-to-retain))\n                                                      (remove (fn [trace]\n                                                                (or (when drop-reagent (metam/low-level-reagent-trace? trace))\n                                                                    (when drop-re-frame (metam/low-level-re-frame-trace? trace)))))) all-traces)]\n        {:db       (-> db\n                       (assoc-in [:traces :all-traces] retained-traces)\n                       (update :epochs (fn [epochs]\n                                         (let [current-index (:current-epoch-index epochs)\n                                               current-id    (:current-epoch-id epochs)]\n                                           (assoc epochs\n                                             :matches retained-matches\n                                             :matches-by-id (into {} (map (juxt first-match-id identity)) retained-matches)\n                                             :match-ids (mapv first-match-id retained-matches)\n                                             :parse-state parse-state\n                                             :sub-state new-sub-state\n                                             :subscription-info subscription-info\n                                             ;; Reset current epoch to the head of the list if we got a new event in.\n                                             :current-epoch-id (if (seq new-matches) nil current-id)\n                                             :current-epoch-index (if (seq new-matches) nil current-index))))))\n         :dispatch (when quiescent? [:epochs/quiescent])})\n      ;; Else\n      {:db db})))\n\n;; TODO: this code is a bit messy, needs refactoring and cleaning up.\n(rf/reg-event-fx\n  :epochs/previous-epoch\n  [(rf/path [:epochs])]\n  (fn [{:keys [db]} _]\n    (if-some [current-id (:current-epoch-id db)]\n      (let [match-ids         (:match-ids db)\n            match-array-index (utils/find-index-in-vec (fn [x] (= current-id x)) match-ids)\n            new-id            (nth match-ids (dec match-array-index))]\n        {:db       (assoc db :current-epoch-id new-id)\n         :dispatch [:snapshot/reset-current-epoch-app-db new-id]})\n      (let [new-id (nth (:match-ids db)\n                        (- (count (:match-ids db)) 2))]\n        {:db       (assoc db :current-epoch-id new-id)\n         :dispatch [:snapshot/reset-current-epoch-app-db new-id]}))))\n\n(rf/reg-event-fx\n  :epochs/next-epoch\n  [(rf/path [:epochs])]\n  (fn [{:keys [db]} _]\n    (if-some [current-id (:current-epoch-id db)]\n      (let [match-ids         (:match-ids db)\n            match-array-index (utils/find-index-in-vec (fn [x] (= current-id x)) match-ids)\n            new-id            (nth match-ids (inc match-array-index))]\n        {:db       (assoc db :current-epoch-id new-id)\n         :dispatch [:snapshot/reset-current-epoch-app-db new-id]})\n      (let [new-id (utils/last-in-vec (:match-ids db))]\n        {:db       (assoc db :current-epoch-id new-id)\n         :dispatch [:snapshot/reset-current-epoch-app-db new-id]}))))\n\n(rf/reg-event-fx\n  :epochs/most-recent-epoch\n  [(rf/path [:epochs])]\n  (fn [{:keys [db]} _]\n    {:db       (assoc db :current-epoch-index nil\n                         :current-epoch-id nil)\n     :dispatch [:snapshot/reset-current-epoch-app-db (utils/last-in-vec (:match-ids db))]}))\n\n(rf/reg-event-fx\n  :epochs/load-epoch\n  [(rf/path [:epochs])]\n  (fn [{:keys [db]} [_ new-id]]\n    {:db       (assoc db :current-epoch-id new-id)\n     :dispatch [:snapshot/reset-current-epoch-app-db new-id]}))\n\n(rf/reg-event-db\n  :epochs/replay\n  [(rf/path [:epochs])]\n  (fn [epochs _]\n    (let [current-epoch-id (or (get epochs :current-epoch-id)\n                               (utils/last-in-vec (get epochs :match-ids)))\n          event-trace      (-> (get-in epochs [:matches-by-id current-epoch-id :match-info])\n                               (metam/matched-event))\n          app-db-before    (metam/app-db-before event-trace)\n          event            (get-in event-trace [:tags :event])]\n      (reset! re-frame.db/app-db app-db-before)\n      ;; Wait for quiescence\n      (assoc epochs :replay event))))\n\n(rf/reg-event-db\n  :epochs/quiescent\n  [(rf/path [:epochs])]\n  (fn [db _]\n    (if-some [event-to-replay (:replay db)]\n      (do (re-frame.core/dispatch event-to-replay)\n          (dissoc db :replay))\n      db)))\n\n(rf/reg-event-db\n  :epochs/reset\n  (fn [db]\n    (re-frame.trace/reset-tracing!)\n    (dissoc db :epochs :traces)))\n\n;;\n\n(rf/reg-event-db\n  :subs/ignore-unchanged-l2-subs?\n  [(rf/path [:subs :ignore-unchanged-subs?])]\n  (fn [_ [_ ignore?]]\n    ignore?))\n\n(rf/reg-event-db\n  :subs/open-pod?\n  [(rf/path [:subs :expansions])]\n  (fn [expansions [_ id open?]]\n    (assoc-in expansions [id :open?] open?)))\n\n(rf/reg-event-db\n  :subs/set-diff-visibility\n  [(rf/path [:subs :expansions])]\n  (fn [expansions [_ id diff?]]\n    (let [open? (if diff?\n                  true\n                  (get-in expansions [id :open?]))]\n      (-> expansions\n          (assoc-in [id :diff?] diff?)\n          ;; If we turn on diffing then we want to also expand the path\n          (assoc-in [id :open?] open?)))))\n\n(rf/reg-event-db\n  :subs/set-pinned\n  [(rf/path [:subs :pinned])]\n  (fn [pinned [_ id pinned?]]\n    (assoc-in pinned [id :pin?] pinned?)))\n\n(rf/reg-event-db\n  :subs/set-filter\n  [(rf/path [:subs :filter-str])]\n  (fn [_ [_ filter-value]]\n    filter-value))\n\n;;\n\n(rf/reg-event-db\n  :code/set-code-visibility\n  [(rf/path [:code :code-open?])]\n  (fn [code-open? [_ open?-path open?]]\n    (assoc-in code-open? open?-path open?)))\n\n(rf/reg-event-db\n  :code/hover-form\n  [(rf/path [:code :highlighted-form])]\n  (fn [form [_ new-form]]\n    new-form))\n\n(rf/reg-event-db\n  :code/exit-hover-form\n  [(rf/path [:code :highlighted-form])]\n  (fn [form [_ new-form]]\n    (if (= form new-form)\n      nil\n      new-form)))\n\n(rf/reg-event-db\n  :code/set-show-all-code?\n  [(rf/path [:code :show-all-code?])]\n  (fn [_show-all-code? [_ new-show-all-code?]]\n    new-show-all-code?))\n\n(rf/reg-event-db\n  :code/repl-msg-state\n  [(rf/path [:code :repl-msg-state])]\n  (fn [current-state [_ new-state]]\n    (if (and (= current-state :running) (= new-state :start)) ;; Toggles between :running and :re-running to guarantee rerenderig when you continuously call this event\n      :re-running\n      (if (= new-state :start) :running :end))))\n\n;;\n\n(rf/reg-event-db\n  :component/set-direction\n  [(rf/path [:component])]\n  (fn [component [_ new-direction]]\n    (assoc component :direction new-direction)))\n\n;;\n\n(rf/reg-event-db\n  :errors/dismiss-popup-failed\n  [(rf/path [:errors])]\n  (fn [errors _]\n    (dissoc errors :popup-failed?)))\n\n;;\n\n(rf/reg-event-db\n  :history/toggle-history\n  (fn [db _]\n    (update-in db [:history :showing-history?] not)))\n"]}